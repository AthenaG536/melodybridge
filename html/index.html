<!doctype html>
<html lang="en">
	<head>
		<title>Melodybridge.online</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="css/style.css"/>
		<link rel="stylesheet" href="css/horizontal.css"/>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	</head>
<body>

	<div class="wrap">
			<header>
				<label for="slide-1-trigger">Home</label>
				<label for="slide-2-trigger">Radio</label>
				<label for="slide-3-trigger">Chat</label>
				<label for="slide-4-trigger">About</label>
			</header>

			<input id="slide-1-trigger" type="radio" name="slides" checked>
			<section class="slide slide-one">
				<h1>Headline one</h1>

<script>
					
					var radioTitle = function(){
					var url = 'http://35.225.214.145:8000/status-json.xsl';
						
						$.get(url, function(data){
						var title = data.icestats.source.title[0].title;
						$('#track-title').html(title);
						$('#tlisteners').html(listeners);
						});
					}
					console.log("first")
					
					setInterval(radioTitle, 10000);
					
				
					</script>
					
					<script type="text/javascript">
						function radioTitle() {
						 
						jQuery.ajax({
								url: "http://35.225.214.145:8000/status-json.xsl",
								//force to handle it as text
								
								dataType: "text",
								async: true,
								success: function(data)
								
								{
											
								//data downloaded so we call parseJSON function 
								//and pass downloaded data
								var json = jQuery.parseJSON(data);
								//now json variable contains data in json format
								//let's display a few items
								// this is the element we're updating that will hold the track title
								
									jQuery('#title').text(json.icestats.source.title);
								// this is the element we're updating that will hold the listeners count
									jQuery('#listeners').text(json.icestats.source.listeners);            
							   }
							 });
						   };
						  
						jQuery(document).ready(function(){

								setTimeout(function(){radioTitle();}, 2000);
								// we're going to update our html elements / player every 15 seconds
								setInterval(function(){radioTitle();}, 15000); 

						});

					</script>


			</section>
			<input id="slide-2-trigger" type="radio" name="slides">
			<section class="slide slide-two">
				<h1>Headline two</h1>
					<audio controls>
						<source src="http://35.225.214.145:8000/source" type="audio/mpeg">
					</audio>

					</br>
						Listeners: <span id="listeners">00</span></br>
						Current track: <span id="title">-</span>
					</p>

					
			</section>
			<input id="slide-3-trigger" type="radio" name="slides">
			<section class="slide slide-three">
				<h1>#Hardchats</h1>
				<iframe src="https://kiwiirc.com/client/35.225.214.145/?nick=Melody|?#main" style="border:0; width:100%; height:450px;"></iframe>
			</section>
			<input id="slide-4-trigger" type="radio" name="slides">
			<section class="slide slide-four">
				<h1>About this website</h1>
			</section>	
		
        </div>

<script src="js/worker.js"></script>
</b
</body>
</html>





